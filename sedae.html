<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>한 대 — 공지사항 | 세 대</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    :root { --olive:#b5a14a; --olive-dark:#6b5b23; }
    body { margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color:#222; }
    .site-header{border-bottom:1px solid #e5e7eb;}
    .container{max-width:960px; margin:0 auto; padding:0 16px;}
    .back-btn{
      display:inline-block; margin:12px 0; text-decoration:none; color:#333; font-weight:600;
      padding:6px 10px; border:1px solid #ccc; border-radius:6px; background:#f9f9f9; font-size:14px;
    }
    .back-btn:hover{background:#eee;}

    .page{padding:28px 0 88px;}
    .page-title{color:var(--olive-dark); margin:0 0 6px;}
    .lead{color:#374151; margin:0 0 18px;}

    .toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:12px 0 16px;}
    .toolbar input[type="search"]{flex:1; min-width:200px; padding:10px 12px; border:1px solid #d1d5db; border-radius:8px; font-size:14px;}
    .toolbar select{padding:10px 12px; border:1px solid #d1d5db; border-radius:8px; font-size:14px;}

    .list{display:flex; flex-direction:column; gap:10px;}

    .notice{
      border:1px solid #e5e7eb; border-radius:12px; background:#fff; overflow:hidden;
    }
    .notice-summary{
      width:100%; text-align:left; background:#fff; border:0; padding:14px 16px;
      display:flex; justify-content:space-between; gap:12px; cursor:pointer;
    }
    .notice-summary:hover{background:#fffdfa;}
    .notice-meta{display:flex; gap:8px; align-items:center; color:#6b7280; font-size:12px;}
    .badge{background:#fff6d6; border:1px solid #f2e6a8; color:#6b5b23; border-radius:999px; padding:2px 8px; font-size:12px;}
    .notice-body{display:none; padding:0 16px 16px; color:#374151; line-height:1.6;}
    .notice.open .notice-body{display:block;}

    /* 배너 */
    .notice-banner-wrap{
      position:relative; width:100%; aspect-ratio:1/1; background:#f3f4f6; overflow:hidden;
    }
    .notice-banner{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block;
    }

    /* 오른쪽 아래: 다국어 전환 */
    .lang-switcher{
      position:fixed; bottom:16px; right:16px; display:flex; gap:6px; z-index:1000;
      background:#fff; border:1px solid #ccc; border-radius:8px; padding:6px 8px; box-shadow:0 2px 6px rgba(0,0,0,.15);
    }
    .lang-switcher button{
      background:#fff; border:1px solid #ddd; border-radius:6px;
      padding:4px 8px; font-size:13px; cursor:pointer;
    }
    .lang-switcher button.active{ background:var(--olive); color:#fff; border-color:var(--olive-dark); }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <a href="index.html" class="back-btn" id="btnBack">← 돌아가기</a>
    </div>
  </header>

  <main class="container page">
    <h1 class="page-title" id="title">세 대 - 세상과 연결</h1>
    <p class="lead" id="subtitle">세상과 연결하는 동호회 정보를 확인하세요.</p>

    <div class="toolbar">
      <input type="search" id="q" placeholder="검색: 제목/내용" aria-label="공지 검색" />
      <select id="order" aria-label="정렬">
        <option value="new">최신순</option>
        <option value="old">오래된순</option>
      </select>
      <select id="filter" aria-label="분류">
        <option value="all">전체</option>
        <option value="notice">공지</option>
        <option value="event">행사</option>
        <option value="guide">안내</option>
      </select>
    </div>

    <section class="list" id="list" aria-live="polite">
      <!-- JS로 렌더링 -->
    </section>
  </main>

  <!-- 오른쪽 아래: 다국어 전환 -->
  <div class="lang-switcher">
    <button data-lang="ko" class="active">한국어</button>
    <button data-lang="en">English</button>
    <button data-lang="zh">中文</button>
    <button data-lang="vi">Tiếng Việt</button>
  </div>

  <script>
    
    // ===== 더미 데이터 =====
    const NOTICES = [
    
      {
        id: 1,
        type: 'event',
        date: '2025-08-22',
        title_ko: '2025 상대동 독서 모임 회원 모집',
        body_ko: '동아리주제: 다양한 도서를 함께 읽고 토론 및 활동<br>모임시기: 매월 둘째, 넷째 주 토요일 10:00~12:00<br>대상: 성인<br>장소: 원신흥도서관 작은회의실',
        title_en: 'Neighborhood Reading Crue', body_en: 'Join our intergenerational talk salon. Limited seats. Beverages provided.',
        title_zh: '社区谈话沙龙', body_zh: '欢迎报名跨代交流沙龙，名额有限，提供饮品。',
        title_vi: 'Talk Salon khu phố', body_vi: 'Mời tham gia talk salon giao lưu giữa các thế hệ. Có đồ uống.',
        banner: '/images/read.png'        // 루트 기준 경로 권장
      },
      {
        id: 2, type: 'event', date: '2025-07-30', title_ko: '월평동 러닝 모임 회원 모집',
        body_ko: '함께 달리면서 운동하실 분 환영합니다.<br>일시: 매주 화, 금 저녁 7시<br>장소: 유성구청 앞에서 모여 신세계 백화점까지 달려요',
        title_en: 'Running Crue', body_en: 'Apply via email or on-site. See the attached guide for fees and equipment.',
        title_zh: '场地租借指南', body_zh: '可通过邮件或现场申请。费用和设备清单见附加说明。',
        title_vi: 'Cách thuê không gian', body_vi: 'Đăng ký qua email hoặc trực tiếp. Xem phí và thiết bị trong hướng dẫn đính kèm.',
        banner: '/images/running.png'
      },
      {
        id: 3, type: 'event', date: '2025-07-30', title_ko: '평촌동 플로깅 모임 회원 모집',
        body_ko: '플로깅을 진행하면서 일상 속 소소한 기쁨을 느끼고 싶은 분 환영합니다.<br>일시: 매주 평일 저녁 6시<br>쓰레기봉투, 장갑, 집게 드립니다.',
        title_en: 'Floaging Crue', body_en: 'Apply via email or on-site. See the attached guide for fees and equipment.',
        title_zh: '场地租借指南', body_zh: '可通过邮件或现场申请。费用和设备清单见附加说明。',
        title_vi: 'Cách thuê không gian', body_vi: 'Đăng ký qua email hoặc trực tiếp. Xem phí và thiết bị trong hướng dẫn đính kèm.',
        banner: '/images/floaging.png'
      },
      {
        id: 4, type: 'event', date: '2025-06-12', title_ko: '오정마을 자원봉사자 모집',
        body_ko: '일상 속 실천할 수 있는 자원봉사 하실 분 구합니다.<br>관심 있으신 분은 메일로 신청주세요.',
        title_en: 'Bongsa', body_en: 'Apply via email or on-site. See the attached guide for fees and equipment.',
        title_zh: '场地租借指南', body_zh: '可通过邮件或现场申请。费用和设备清单见附加说明。',
        title_vi: 'Cách thuê không gian', body_vi: 'Đăng ký qua email hoặc trực tiếp. Xem phí và thiết bị trong hướng dẫn đính kèm.',
        banner: '/images/bongsa.png'
      }
    ];

    // ===== 다국어 리소스 =====
    const I18N = {
      ko: {
        html:'ko', back:'← 돌아가기', title:'세 대 - 세상과 연결', subtitle:'세상과 연결하는 동호회 정보를 확인하세요.',
        searchPh:'검색: 제목/내용', orderNew:'최신순', orderOld:'오래된순',
        filterAll:'전체', filterNotice:'공지', filterEvent:'행사', filterGuide:'안내',
        labels:{ notice:'공지', event:'행사', guide:'안내' }
      },
      en: {
        html:'en', back:'← Back to Handae', title:'Announcements', subtitle:'News and updates from Handae – Conversation Space.',
        searchPh:'Search: title/content', orderNew:'Newest', orderOld:'Oldest',
        filterAll:'All', filterNotice:'Notice', filterEvent:'Event', filterGuide:'Guide',
        labels:{ notice:'Notice', event:'Event', guide:'Guide' }
      },
      zh: {
        html:'zh-CN', back:'← 返回一代', title:'公告', subtitle:'一代—谈笑空间的新闻与通知。',
        searchPh:'搜索：标题/内容', orderNew:'最新', orderOld:'最早',
        filterAll:'全部', filterNotice:'公告', filterEvent:'活动', filterGuide:'指南',
        labels:{ notice:'公告', event:'活动', guide:'指南' }
      },
      vi: {
        html:'vi', back:'← Về Hàn Đại', title:'Thông báo', subtitle:'Tin tức & cập nhật từ Hàn Đại – Không gian trò chuyện.',
        searchPh:'Tìm: tiêu đề/nội dung', orderNew:'Mới nhất', orderOld:'Cũ nhất',
        filterAll:'Tất cả', filterNotice:'Thông báo', filterEvent:'Sự kiện', filterGuide:'Hướng dẫn',
        labels:{ notice:'Thông báo', event:'Sự kiện', guide:'Hướng dẫn' }
      }
    };

    function tNotice(n, lang){
      const map = { ko:['title_ko','body_ko'], en:['title_en','body_en'], zh:['title_zh','body_zh'], vi:['title_vi','body_vi'] };
      const [tt, bb] = map[lang] || map.ko;
      return { title: n[tt], body: n[bb] };
    }

    // ===== 렌더링 =====
    const listEl = document.getElementById('list');
    const qEl = document.getElementById('q');
    const orderEl = document.getElementById('order');
    const filterEl = document.getElementById('filter');

    function render(lang){
      const L = I18N[lang] || I18N.ko;
      document.documentElement.lang = L.html;

      // UI 텍스트
      document.getElementById('btnBack').textContent = L.back;
      document.getElementById('title').textContent = L.title;
      document.getElementById('subtitle').textContent = L.subtitle;
      qEl.placeholder = L.searchPh;
      orderEl.options[0].textContent = L.orderNew;
      orderEl.options[1].textContent = L.orderOld;
      filterEl.options[0].textContent = L.filterAll;
      filterEl.options[1].textContent = L.filterNotice;
      filterEl.options[2].textContent = L.filterEvent;
      filterEl.options[3].textContent = L.filterGuide;

      // 필터링/정렬
      const term = (qEl.value || '').trim().toLowerCase();
      const type = filterEl.value;
      const sorted = [...NOTICES].sort((a,b)=> orderEl.value==='new' ? (b.date.localeCompare(a.date)) : (a.date.localeCompare(b.date)));
      const filtered = sorted.filter(n=>{
        if (type!=='all' && n.type!==type) return false;
        if (!term) return true;
        const tb = tNotice(n, lang);
        return (tb.title + ' ' + tb.body).toLowerCase().includes(term);
      });

      // 목록 렌더
      listEl.innerHTML = '';
      if (!filtered.length){
        listEl.innerHTML = '<div class="notice" style="padding:16px;">결과가 없습니다.</div>';
        return;
      }

      filtered.forEach(n=>{
        const tb = tNotice(n, lang);
        const div = document.createElement('article');
        div.className='notice';

        const bannerHtml = n.banner ? `
          <div class="notice-banner-wrap">
            <img class="notice-banner" src="${n.banner}" alt="${tb.title}" loading="lazy">
          </div>` : '';

        div.innerHTML = `
          ${bannerHtml}
          <button class="notice-summary" aria-expanded="false">
            <span style="display:flex; flex-direction:column; gap:4px;">
              <strong>${tb.title}</strong>
              <span class="notice-meta">
                <span class="badge">${L.labels[n.type]}</span>
                <time datetime="${n.date}">${n.date}</time>
              </span>
            </span>
            <span aria-hidden="true">▾</span>
          </button>
          <div class="notice-body">
            <p>${tb.body}</p>
          </div>
        `;

        const btn = div.querySelector('.notice-summary');
        btn.addEventListener('click', ()=>{
          const open = div.classList.toggle('open');
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
        listEl.appendChild(div);
      });
    }

    // ===== 언어 전환 =====
    function applyLang(code){
      const lang = I18N[code] ? code : 'ko';
      localStorage.setItem('lang', lang);
      document.querySelectorAll('.lang-switcher button').forEach(b=> b.classList.toggle('active', b.dataset.lang===lang));
      render(lang);
    }
    document.querySelectorAll('.lang-switcher button').forEach(b=>{
      b.addEventListener('click', ()=> applyLang(b.dataset.lang));
    });

    // 이벤트: 검색/정렬/필터
    [qEl, orderEl, filterEl].forEach(el=>{
      el.addEventListener('input', ()=> render(localStorage.getItem('lang') || 'ko'));
      el.addEventListener('change', ()=> render(localStorage.getItem('lang') || 'ko'));
    });

    // 초기화
    document.getElementById('year')?.remove();
    applyLang(localStorage.getItem('lang') || 'ko');
  </script>



</body>
</html>
